<section
  class="bg-1 flex flex-col lg:flex-row h-[90vh] items-center"
  id="contact"
>
  <div class="Ã± max-w-4xl mx-auto text-center px-4 py-16">
    <h2 class="text-7xl font-bold text-white mb-8 font-dm">Kontakt</h2>
    <p class="text-2xl text-[#f6f6f6] mb-2 font-jost">
      Haben Sie Fragen? Kontaktieren Sie uns.
    </p>
  </div>

  <div class="w-full bg-1 lg:w-1/2 xl:w-5/12 px-4">
    <div class="bg-white relative rounded-lg p-8 sm:p-12 shadow-lg">
      <form id="contactForm">
        <div class="mb-6">
          <input
            name="name"
            type="text"
            placeholder="Ihr Name"
            class="w-full
                        rounded
                        py-3
                        px-[14px]
                        text-body-color text-base
                        border border-[f0f0f0]
                        outline-none
                        focus-visible:shadow-none
                        focus:border-primary"
            required
          />
        </div>
        <div class="mb-6">
          <input
            name="email"
            type="email"
            placeholder="Ihre E-Mail-Adresse"
            class="w-full
                        rounded
                        py-3
                        px-[14px]
                        text-body-color text-base
                        border border-[f0f0f0]
                        outline-none
                        focus-visible:shadow-none
                        focus:border-primary"
            required
          />
        </div>
        <div class="mb-6">
          <input
            name="phone"
            type="text"
            placeholder="Ihre Telefonnummer"
            class="w-full
                        rounded
                        py-3
                        px-[14px]
                        text-body-color text-base
                        border border-[f0f0f0]
                        outline-none
                        focus-visible:shadow-none
                        focus:border-primary"
            required
          />
        </div>
        <div class="mb-6">
          <textarea
            name="message"
            rows="6"
            placeholder="Ihre Nachricht"
            class="w-full
                        rounded
                        py-3
                        px-[14px]
                        text-body-color text-base
                        border border-[f0f0f0]
                        resize-none
                        outline-none
                        focus-visible:shadow-none
                        focus:border-primary"
            required></textarea>
        </div>
        <div>
          <button
            type="submit"
            class="w-full
                        text-white bg-2
                        bg-primary
                        rounded
                        border border-primary
                        p-3
                        transition
                        cursor-pointer
                        hover:bg-opacity-90"
          >
            Send
          </button>
        </div>
      </form>
      <script type="module">
        document
          .getElementById("contactForm")
          .addEventListener("submit", async (e) => {
            e.preventDefault();

            const form = e.target;
            const data = {
              name: form.name.value,
              email: form.email.value,
              phone: form.phone.value,
              message: form.message.value,
            };

            try {
              const response = await fetch(
                "https://email-sender-7t5b.onrender.com/api/contact/send",
                {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                  },
                  body: JSON.stringify(data),
                }
              );

              if (response.ok) {
                const successMessage = document.createElement("div");
                successMessage.textContent = "Mensaje enviado correctamente.";
                successMessage.className = "text-green-500 text-center mt-4";
                form.parentElement.appendChild(successMessage);

                form.reset();

                setTimeout(() => {
                  successMessage.remove();
                }, 5000);
              } else {
                alert("Error al enviar el mensaje.");
              }
            } catch (error) {
              alert("Error de red.");
              console.error(error);
            }
          });
      </script>
    </div>
  </div>
</section>
